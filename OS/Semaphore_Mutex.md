# 세마포어와 뮤텍스

```
a = 1
b = 1
a = a+b
```
위의 코드는 a와 b를 더하여 a에 대입하는 아주 간단한 코드이다. 두개의 스레드가 이 코드를 동시에 실행한다면 a의 결과값은 3으로 예상되지만 실제로는 3이 아닌 다른 결과값이 나올 수 있다. 그 이유는 위 연산은 다음과 같은 절차를 거치게 되는데<br>
**a의 값을 읽어옴 -> b의 값을 읽어옴 -> a와 b를 더함 -> 연산의 결과를 a에 대입**<br>
이 과정에서 첫번째 스레드가 a와 b를 더하고 a에 대입되기전 두번째 스레드가 a의 값을 변하기전인 1의 값으로 읽어와 연산을 진행한다면 결과는 1 + 1 를 연산한 2의 값을 a에 대입하기 때문이다. 

**세마포어와 뮤텍스**는 이와 같이 공유된 자원에 여러개의 스레드가 동시에 접근할 경우 동기화에 문제가 생길 수 있는데 이를 해결할 수 있는 방법이다.

## 세마포어
- 임계영역에 접근할 수 있는 스레드의 갯수를 정하여 접근할 수 있는지 없는지 자원의 상태를 알려주는 정수형 변수(최대 갯수의 스레드가 임계영역에 접근하고 있을 경우 0을 반환해준다.)
- 바이너리 세마포어 : 0 또는 1의 값을 가지는 세마포어(한 개의 세마포어만 임계영역에 접근이 가능함)
- 카운팅 세마포어 : 바이너리 세마포어 이외의 세마포어

**임계영역(Critical Section)** : 둘 이상의 스레드가 동시에 실행할 경우 발생할 수 있는 코드 블록

## 뮤텍스
- 바이너리 세마포어와 같은 개념으로 한개의 스레드만 임계영역에 접근할 수 있음

### 세마포어와 뮤텍스 차이점
- 세마포어는 소유하고 있지않은 스레드에 의해 해제될 수 있지만 뮤텍스는 소유라는 개념이 존재해 소유하고 있는 스레드만이 해제할 수 있음